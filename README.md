# Итоговая работа по модулю «Безопасность операционных систем, системное программирование»- Михалёв Сергей.

## Легенда
<details>
<summary>Описание</summary>
Компания Х использует корпоративное сетевое приложение "Защищённый контур", позволяющее "безопасно" обмениваться корпоративной информацией (в том числе хранить персональные данные клиентов и информацию, отнесённую к коммерческой тайне). Вам предстоит проанализировать само приложение на уязвимости, а также настройки ОС на серверах, где это приложение функционирует.

Компания разработчик поставляет уже настроенный сервер в виде [OVA](https://drive.google.com/file/d/1YMAQjcHKimoWVMCAr7G7-ZgNk1cvBaFU/view?usp=sharing) (md5 = 5935192d257a003b85584a84dec83367), который (по их заверениям) вполне безопасен и может использоваться "из коробки" (т.е. достаточно импортировать в среду виртуализации и можно запускать в боевой среде).

По информации, полученной от разработчика, цитата: "приложение содержит механизмы безопасности и может использоваться при построении ИСПД до 4 УЗ включительно и систем, обрабатывающих коммерческую тайну".

Документация на приложение разработчиком не предоставлена, поскольку, цитата: "интерфейс интуитивно понятный, обучающих материалов для пользователей не требуется".

Исходные коды так же не предоставлены.

Вас, как специалиста, попросили выполнить анализ данного приложения с точки зрения его реальной защищённости.

</details>

## Техническая информация

<details>
<summary>Описание</summary>

Цитата:
```
Логин/пароль пользователя в ОС OVA - system/system (после первого запуска необходимо сменить пароль).

Все файлы приложения располагаются в каталоге /opt/sk

Приложение предназначено для работы в ОС Linux x86_64

Приложение настроено в качестве сервиса systemd - sk.service

Приложение запускается на порту 8888 и использует протокол HTTP для своей работы, взаимодействие с приложением осуществляется через веб-интерфейс (посредством веб-браузера с хоста)

При импорте настроек виртуального образа в гипервизор, отличный от Virtual Box, может потребоваться дополнительная настройка сетевого интерфейса виртуального образа с помощью утилиты ip

При первом старте в приложении регистрируется пользователь с логином admin, пароль генерируется автоматически и записывается в файл /opt/sk/password.txt
```
</details>

## Задача

Подготовьте отчёт о:
1. Найденных несоответствиях системы требованиям нормативных документов*
1. Найденных "слабостях" (которые могут привести к уязвимостям) и предложение по необходимым мерам для их устранения (если такие меры возможно принять).

Формат отчёта - свободный, но обязательно должен включать указанные выше два пункта.

<details>
<summary>Примечание*</summary>
в части документов нужно:
1. ПДн: реализация мер по обеспечению безопасности в части ИАФ, УПД
1. КТ: "разрешение или запрет доступа к информации, составляющей коммерческую тайну" посредством механизмов разграничения доступа, встроенных в приложение (механизмы ОС и сторонних сервисов рассматривать не нужно)

**Важно**: вы можете использовать любые техники из пройденных на предыдущих курсах: от сканирования портов, подбора паролей, анализа бинарных (исполняемых) файлов до попыток "уронить" приложение, выполнить произвольный код и т.д.

**Важно**: если в части документации нужно рассматривать только само приложение, то в части поиска слабостей вы можете рассматривать и окружение приложения (ОС и сервисы).

**Важно:** Виртуальная среда - выполняет роль физического сервера, на котором работает приложение. Функции и свойства виртуальной среды - это независимые свойства и функции среды не относящиеся к исследуемому приложению.

<details>
<summary>Подсказка 1</summary>

Попробуйте пройтись по [CWE TOP 25 2020](https://cwe.mitre.org/top25/archive/2020/2020_cwe_top25.html), не обращая внимания на то, что мы ещё не прходили (SQL, CSRF, XML и т.д.).
</details>

<details>
<summary>Подсказка 2</summary>

Перечень мер защиты, которые необходимо реализовать приведён в [21 приказе ФСТЭК России](https://fstec.ru/dokumenty/vse-dokumenty/prikazy/prikaz-fstek-rossii-ot-18-fevralya-2013-g-n-21)
</details>
</details>


-----
## Решение

### 1. Анализ легенды.

Для начала решил покопаться в фразе производителя:
*По информации, полученной от разработчика, цитата: "приложение содержит механизмы безопасности и может использоваться при построении ИСПД до 4 УЗ включительно и систем, обрабатывающих коммерческую тайну".*

#### 1. *"Содержит механизмы безопасности"*
Это не означает  "соответствует требованиям" 

В приложении скорее всего реализованы:
* логин/пароль,
* роли,
* какие-то проверки доступа,
* возможно, журналы событий.

Не факт, что:
* механизмы корректны,
* они достаточны,
* они включены по умолчанию,
* они соответствуют НПА,
* они устойчивы к обходу механизмов.

#### 2. *"Может использоваться при построении ИСПД"*
Ключевое слово здесь- *"может"*, а не *"соответствует"*.
* разработчик не заявляет соответствие [ФЗ-152](https://www.consultant.ru/document/cons_doc_LAW_61801/), [ПП-1119](https://www.consultant.ru/document/cons_doc_LAW_137356/), приказам ФСТЭК;
* он лишь говорит, что теоретически приложение можно включить в ИСПД.

#### 3. *"Документация на приложение разработчиком не предоставлена, поскольку, цитата: "интерфейс интуитивно понятный, обучающих материалов для пользователей не требуется"."*
Интуитивная понятность пользовательского интерфейса не является критерием оценки безопасности программного продукта и не может рассматриваться как замена эксплуатационной и технической документации.

В отсутствие документации невозможно достоверно установить:
* реализованные механизмы аутентификации и авторизации;
* модель разграничения доступа (пользователи, роли, привилегии);
* наличие и параметры журналирования и аудита событий безопасности;
* способы защиты хранимых и передаваемых данных;
* порядок резервного копирования и восстановления;
* активные ограничения по времени ожидания состояния документации;
* переустановок и очистки данных;
* требования к безопасной конфигурации операционной системы и окружения.

Отсутствие описания механизмов безопасности не позволяет сопоставить реализованные меры с требованиями, установленными нормативными правовыми актами Российской Федерации в области защиты персональных данных, в частности:
* постановлением Правительства РФ №1119;
* приказом ФСТЭК России №21.

В общем, даже теоретически нельзя доказать возможность выполнение требований 4 УЗ ещё до рассомтрения нами требовнаий пункта 13 ПП №1119.

#### 4. *"Исходные коды так же не предоставлены."*

Это исключает возможность проведения анализа исходного кода на наличие уязвимостей, закладок и ошибок реализации механизмов безопасности. В условиях отсутствия исходных кодов единственным возможным способом подтверждения корректности реализации механизмов защиты является предоставление результатов независимой оценки соответствия либо сертификации программного продукта, которые в данном случае также отсутствуют.